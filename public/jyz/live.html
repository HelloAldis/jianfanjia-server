<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<title>互联网首个设计师专单平台|装修效果图|装修流程|施工监理_简繁家</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="description" content="简繁家提供家装设计、新房装修、装修流程、室内设计、家装设计、室内装修、施工监理等服务和装修知识、装修风格、装修效果图、装修设计图等信息。">
	<meta name="keywords" content="室内装修,装修流程,装修知识,装修效果图,家装施工监理">
	<link rel="stylesheet" type="text/css" href="../../static/css/public.css" />
	<link rel="stylesheet" type="text/css" href="../../static/css/user.css" />
		<style> 
		.authed table{
			width: 100%;
			text-align: center;
		}
		.authed th{
			line-height: 40px;
			font-size: 16px;
			background-color: #fafafa;
		}
		.authed th,.authed td{
			border-bottom: 1px solid #e2e2e2;
		}
		.authed td{
			line-height: 34px;
			font-size: 14px;
		}
		.authed td.td5 a{
			line-height: 34px;
			color: #5494e4;
		}
		.authed td.td5 a i{
			font-size: 24px;
		}
		.authed td.td5 a:hover{
			text-decoration: none;
			color: #0071ff;
		}
		.authed td.td6 a{
			margin: 0 10px;
			color: #666;
		}
		.authed td.td6 a i{
			margin-right: 3px;
		}
		.authed td.td6 a:hover{
			text-decoration: none;
			color: #fe7004;
		}
		.authed .editor .iconfont{
			color: #fc8c49;
		}
		.authed .delete .iconfont{
			color: #666;
		}
		.authed .td1{width: 100px;}
		.authed .td2{width: 300px;}
		.authed .td3{width: 80px;}
		.authed .td4{width: 100px;}
		.authed .td5{width: 60px;}
		.authed .td6{width: 160px;}
		.btns{padding-top: 30px;text-align: center;}
	</style>
	<script type="text/javascript" src="../../static/js/lib/jquery-1.11.1.min.js"></script>
	<script type="text/javascript" src="../../static/js/lib/public.js"></script>
	<script type="text/javascript" src="../../static/js/lib/page.js"></script>
</head>
<body>
	<div class="g-hd">
		<div class="g-wp f-cb">
			<div class="m-logo f-fl">
				<h1><a href="../tpl/index/index.html">简繁家</a></h1>
			</div>
			<div class="f-fr">
				<div class="user" id="j-userLogin">
					<a href="../tpl/user/login.html">登录</a>/<a href="../tpl/user/reg.html">注册</a>
				</div>
				<ul class="m-nav f-fl">
					<li class="active"><a href="../tpl/index/index.html">首页</a></li>
					<li><a href="../tpl/design/index.html">设计师</a></li>
					<li><a href="../tpl/live/index.html">装修直播</a></li>
					<li><a href="../tpl/merit/index.html">为什么选简繁家</a></li>
				</ul>
			</div>
		</div>
	</div>
	<div class="g-wp g-user f-cb">
		<div class="user-sd f-fl">
			<h2>后台管理</h2>
			<ul>
				<li class="current"><a href="live.html">装修直播</a></li>
				<li><a href="authed.html">设计师认证</a></li>
			</ul>
		</div>
		<div class="user-mn f-fr">
			<div class="m-tt">
				<h3>装修直播</h3>
			</div>
			<div class="m-ct">
				<div class="authed" id="j-live">
					<table>
						<thead>
							<tr>
								<th class="td1">项目名称</th>
								<th class="td2">所在地区</th>
								<th class="td3">当前状态</th>
								<th class="td4">设计师</th>
								<th class="td4">项目经理</th>
								<th class="td6">查看详情</th>
								<th class="td7">操作</th>
							</tr>
						</thead>
						<tbody></tbody>
					</table>
				</div>
				<div class="m-page" id="j-page"></div>
				<div class="btns">
					<a href="add_live.html" target="_blank" class="btn">新建装修直播</a>
				</div>
			</div>
		</div>
	</div>
	<div class="g-ft">
		<div class="m-sitemap f-cb">
			<div class="g-wp">
				<div class="sitemap f-fl">
					<dl>
						<dt>业主指南</dt>
						<dd><a href="">提交需求</a></dd>
						<dd><a href="">预约设计师</a></dd>
					</dl>
					<dl>
						<dt>设计师指南</dt>
						<dd><a href="">设计师认证</a></dd>
						<dd><a href="">入驻协议</a></dd>
						<dd><a href="">上传作品</a></dd>
						<dd><a href="">上门量房</a></dd>
					</dl>
					<dl>
						<dt>关于我们</dt>
						<dd><a href="">关于我们</a></dd>
						<dd><a href="">联系我们</a></dd>
					</dl>
				</div>
				<div class="erweima f-fr">
					<img src="../../img/public/erweima.jpg" alt="" />
				</div>
			</div>
		</div>
		<div class="m-copy">
			<div class="g-wp">
			Copyright © 2015-2025 jianfanjia.com All Rights Reserved 武汉家易装科技有限公司 隐私权政策 鄂ICP备15014103号
			</div>
		</div>
	</div>
</body>
</html>
<script type="text/javascript">
	var $authed = $('#j-live');
	var $list = $authed.find('tbody');
	//渲染生成列表
	function loadList(){
		var url = RootUrl+'api/v1/share';
		$.ajax({
			url:url,
			type: 'GET',
			contentType : 'application/json; charset=utf-8',
			dataType: 'json',
			success: function(res){
				if(res["data"].length){
					page(res["data"]);
				}
		   	}
		});
	}
	//创建列表
	function createList(data){
		return '<tr data-uid="'+data._id+'">'
					+'<td class="td1">'+data.cell+'</td>'
					+'<td class="td2">'+data.province+" "+data.city+" "+data.district+'</td>'
					+'<td class="td3">'+globalData.dec_flow[data.process.length-1]+'</td>'
					+'<td class="td4">'+data.designer.username+'</td>'
					+'<td class="td4">'+data.manager+'</td>'
					+'<td class="td5"><a href="../tpl/live/detail.html?'+data._id+'" target="_blank">查看</a></td>'
					+'<td class="td6"><a href="update_live.html?'+data._id+'" class="update">更新</a> | <a href="javascript:;" class="delete">删除</a></td>'
				+'</tr>'
	}
	//生成分页
	function page(arr){
		var page = new Pageing({
			id : 'j-page',
			allNumPage : arr.length,
			itemPage : 10,
			showPageNum : 9,
			endPageNum : 1,
			currentPage : 0,
			linkTo : '',
			callback : function(num,obj){
				var maxElem = Math.min((num+1)*this.itemPage , this.allNumPage)
				$list.html('');
				for(var i=num*this.itemPage;i<maxElem;i++){
					$list.append(createList(arr[i]));
				}
				obj.find('.btns').on('click' , function(ev){
					ev.stopPropagation();
				});
				return false;
			}
		});
	};
	//删除列表
	$authed.delegate('.delete','click',function(ev){
		ev.preventDefault();
		var oDl = $(this).closest('tr');
		var uidName = oDl.data('uid');
		var url = RootUrl+'api/v1/share';
		$.ajax({
			url:url,
			type: 'DELETE',
			contentType : 'application/json; charset=utf-8',
			dataType: 'json',
			data : JSON.stringify({
				"_id":uidName
			}),
			processData : false,
			success: function(res){
				if(res["msg"] == "success"){
					alert('删除成功')
					loadList();
				}else{
					alert('删除失败')
				}
		   	}
		});
	});
	loadList();
</script>