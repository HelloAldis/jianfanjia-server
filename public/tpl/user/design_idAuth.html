<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8" />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<title>互联网设计师专单平台|装修效果图|装修流程|施工监理_简繁家</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="description" content="简繁家提供家装设计、新房装修、装修流程、室内设计、家装设计、室内装修、施工监理等服务和装修知识、装修风格、装修效果图、装修设计图等信息。">
	<meta name="keywords" content="室内装修,装修流程,装修知识,装修效果图,家装施工监理">
	<link rel="stylesheet" type="text/css" href="../../static/css/public.css" />
	<link rel="stylesheet" type="text/css" href="../../static/css/user.css" />
	<script type="text/javascript" src="../../static/js/lib/jquery-1.11.1.min.js"></script>
	<script type="text/javascript" src="../../static/js/lib/tdist.js"></script>
	<script type="text/javascript" src="../../static/js/lib/public.js"></script>
	<script type="text/javascript" src="../../static/js/lib/jquery.uploadify-3.1.js"></script>
	<script type="text/javascript" src="../../static/js/lib/jquery.Huploadify.js"></script>
	<!--[if lt IE 9]>
      <script type="text/javascript" src="../../static/js/lib/json2-min.js"></script>
    <![endif]-->
     <!--[if lt IE 8]>
      <script type="text/javascript">
      	if(!-[1,]){window.location.href = "../other/error.html";} 
      </script>
    <![endif]-->
</head>
<body>
	<div class="g-hd">
		<div class="g-wp f-cb">
			<div class="m-logo f-fl">
				<h1><a href="../index/index.html">简繁家</a></h1>
			</div>
			<div class="f-fr">
				<div class="user" id="j-userLogin">
					<a href="../user/login.html">登录</a>/<a href="../user/reg.html">注册</a>
				</div>
				<ul class="m-nav f-fl">
					<li class="active"><a href="../index/index.html">首页</a></li>
					<li><a href="../design/index.html">设计师</a></li>
					<li><a href="../live/index.html">装修直播</a></li>
					<li><a href="../merit/index.html">为什么选简繁家</a></li>
				</ul>
			</div>
		</div>
	</div>
	<div class="g-wp g-user f-cb">
		<div class="user-sd f-fl">
			<h2>我是设计师</h2>
			<ul>
				<li><a href="design_products.html">我的作品</a></li>
				<li><a href="design_owner.html">我的业主</a></li>
				<li><a href="design_scheme.html">业主方案</a></li>
				<li><a href="design_need.html">我的收藏</a></li>
				<li><a href="design_info.html">我的资料</a></li>
				<li><a href="design_team.html">我的施工团队</a></li>
				<li class="current"><a href="design_idAuth.html">身份证银行卡认证</a></li>
			</ul>
		</div>
		<div class="user-mn f-fr">
			<div class="m-tt">
				<h3>身份证银行卡认证</h3>
			</div>
			<div class="m-ct">
				<div class="w-form user-form design-info" id="j-design-auth">
					<form action="http://www.jianfanjia.com" id="design-auth" method="post">
						<p class="tips">*图片上传每张大小为3M以内jpeg/jpg/png格式图片,为了认证显示效果最佳，保证每张图片宽度在600-2000PX之间，高度小于1600PX。<br />注意：为了保证资金安全，请认真填写和上传图片，认证通过以后才能打款。</p>
						<div class="m-item f-cb">
							<div class="item">
								<label class="u-lab" for="design-uid">*身份证号码：</label>
								<div class="u-inp">
									<div class="box">
										<input type="text" class="input" name="design-uid" id="design-uid" />
									</div>
								</div>
							</div>
							<p class="tips-icon tips-icon-ok hide"><i class="iconfont">&#xe616;</i></p>
							<p class="tips-icon tips-icon-err hide"><i class="iconfont">&#xe611;</i></p>
							<p class="tips-info hide"></p>
						</div>
						<div class="item" id="j-file-list">
							<label class="u-lab" for="work_type">*上传身份证正面：(确保身份证号码填写与上传一致)</label>
							<div class="u-inp">
								<div class="file">
									<div class="file-list f-cb">
										<div class="create-item">
											<div class="pic uploadPic" id="upload1">
												<div class="fileBtn">
													<input class="hide" id="fileToUpload1" type="file" name="upfile">
													<p class="hide"><a href="javascript:$('#fileToUpload').uploadify('settings', 'formData', {'typeCode':document.getElementById('id_file').value});$('#fileToUpload').uploadify('upload','*')">上传</a>
													<a href="javascript:$('#fileToUpload').uploadify('cancel','*')">重置上传队列</a>
													</p>
													<input type="hidden" id="sessionId" value="${pageContext.session.id}" />
													<input type="hidden" value="1215154" name="tmpdir" id="id_file1">
												</div>
												<div class="id-pic">
													<img id="uid-img1" src="../../static/img/user/uploadify.jpg" alt="" />
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<p class="tips-info hide"></p>
						</div>
						<div class="item" id="j-file-list">
							<label class="u-lab" for="work_type">*上传身份证反面：</label>
							<div class="u-inp">
								<div class="file">
									<div class="file-list f-cb">
										<div class="create-item">
											<div class="pic uploadPic" id="upload2">
												<div class="fileBtn">
													<input class="hide" id="fileToUpload2" type="file" name="upfile">
													<p class="hide"><a href="javascript:$('#fileToUpload').uploadify('settings', 'formData', {'typeCode':document.getElementById('id_file').value});$('#fileToUpload').uploadify('upload','*')">上传</a>
													<a href="javascript:$('#fileToUpload').uploadify('cancel','*')">重置上传队列</a>
													</p>
													<input type="hidden" id="sessionId" value="${pageContext.session.id}" />
													<input type="hidden" value="1215154" name="tmpdir" id="id_file2">
												</div>
												<div class="id-pic">
													<img id="uid-img2" src="../../static/img/user/uploadify.jpg" alt="" />
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<p class="tips-info hide"></p>
						</div>
						<div class="m-item f-cb" id="design-bank-box">
							<div class="item">
								<label class="u-lab" for="design-bank">*银行：</label>
								<div class="u-inp">
									<div class="m-select" id="design-bank"></div>
								</div>
							</div>
						</div>
						<div class="m-item f-cb">
							<div class="item">
								<label class="u-lab" for="design-bank-card">*卡号：</label>
								<div class="u-inp">
									<div class="box">
										<input type="text" class="input" name="design-bank-card" id="design-bank-card" />
									</div>
								</div>
							</div>
							<p class="tips-icon tips-icon-ok hide"><i class="iconfont">&#xe616;</i></p>
							<p class="tips-icon tips-icon-err hide"><i class="iconfont">&#xe611;</i></p>
							<p class="tips-info hide"></p>
						</div>
						<div class="item" id="j-file-list">
							<label class="u-lab" for="work_type">*上传银行正面：(确保银行卡号填写与上传一致)</label>
							<div class="u-inp">
								<div class="file">
									<div class="file-list f-cb">
										<div class="create-item" >
											<div class="pic uploadPic" id="upload3">
												<div class="fileBtn">
													<input class="hide" id="fileToUpload3" type="file" name="upfile">
													<p class="hide"><a href="javascript:$('#fileToUpload').uploadify('settings', 'formData', {'typeCode':document.getElementById('id_file').value});$('#fileToUpload').uploadify('upload','*')">上传</a>
													<a href="javascript:$('#fileToUpload').uploadify('cancel','*')">重置上传队列</a>
													</p>
													<input type="hidden" id="sessionId" value="${pageContext.session.id}" />
													<input type="hidden" value="1215154" name="tmpdir" id="id_file3">
												</div>
												<div class="id-pic">
													<img id="bank-img1" src="../../static/img/user/uploadify.jpg" alt="" />
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<p class="tips-info hide"></p>
						</div>
						<div class="m-item m-error-info hide" id="error-info"></div>
						<div class="m-item">
							<div class="u-btn">
								<input type="submit" class="btn" id="save-submit" value="提交审核" />
								<span id="auth-box"></span>
							</div>
						</div>
					</form>
				</div>	
			</div>
		</div>	
	</div>
	<style type="text/css">
		.design_info .btn{margin-left: 0;}
		.create-item{width: 100%;}
		#auth-box{margin-left: 5px;}
		.uploadPic{background: none;}
	</style>
	<div class="g-ft">
		<div class="m-sitemap f-cb">
			<div class="g-wp">
				<div class="sitemap f-fl">
					<dl>
						<dt>业主指南</dt>
						<dd><a href="../guide/index.html?0">业务流程</a></dd>
						<dd><a href="../guide/index.html?1">三方保障合同</a></dd>
					</dl>
					<dl>
						<dt>设计师指南</dt>
						<dd><a href="../guide/design.html?0">设计师认证</a></dd>
						<dd><a href="../guide/design.html?1">作品上传</a></dd>
						<dd><a href="../guide/design.html?2">上门沟通及量房</a></dd>
						<dd><a href="../guide/design.html?3">设计师入驻协议</a></dd>
					</dl>
					<dl>
						<dt>关于我们</dt>
						<dd><a href="../about/index.html#about">关于我们</a></dd>
						<dd><a href="../about/index.html#contact">联系我们</a></dd>
					</dl>
				</div>
				<div class="erweima f-fr">
					<img src="../../img/public/erweima.jpg" alt="" />
				</div>
			</div>
		</div>
		<div class="m-copy">
			<div class="g-wp">
			Copyright © 2015-2025 jianfanjia.com All Rights Reserved 武汉家易装科技有限公司 隐私权政策 鄂ICP备15014103号
			</div>
		</div>
	</div>
</body>
</html>
<script type="text/javascript">
	var designBank = new ComboBox({
		id:'design-bank',
		list:['中国工商银行','招商银行','中国农业银行','中国建设银行','中国银行','中国民生银行','中国光大银行','中信银行','交通银行','兴业银行','上海浦东发展银行','中国人民银行','华夏银行','国家开发银行','中国进出口银行','中国农业发展银行','北京银行','上海银行','中国邮政储蓄银行']
	});
	//图片上传
	var checkSupport = function(){
		var input = document.createElement('input');
		var fileSupport = !!(window.File && window.FileList);
		var xhr = new XMLHttpRequest();
		var fd = !!window.FormData;
		return 'multiple' in input && fileSupport && 'onprogress' in xhr && 'upload' in xhr && fd ? 'html5' : 'flash';
	};
	var uploaderUrl = RootUrl+'api/v1/image/upload';
	uoLoadFile($('#upload1'),$('#fileToUpload1'),function(arr){
		var data = $.parseJSON(arr)
		var img = new Image();
		img.onload=function(){
			if(img.width < 600 || img.width > 2000){
				alert('请上传宽度在600-2000之间图片');
				return false;
			}else if(img.height > 1600){
				alert('请上传高度小于1600图片');
				return false;
			}else{
				$('#uid-img1').attr('src',RootUrl+'api/v1/image/'+data.data).data('img',data.data);
				$('#error-info').addClass('hide').html('')
			}
		};  
	    img.onerror=function(){alert("error!")};  
	    img.src=RootUrl+'api/v1/image/'+data.data; 
	})
	uoLoadFile($('#upload2'),$('#fileToUpload2'),function(arr){
		var data = $.parseJSON(arr)
		var img = new Image();
			img.onload=function(){
				if(img.width < 600 || img.width > 2000){
					alert('请上传宽度在600-2000之间图片');
					return false;
				}else if(img.height > 1600){
					alert('请上传高度小于1600图片');
					return false;
				}else{
					$('#uid-img2').attr('src',RootUrl+'api/v1/image/'+data.data).data('img',data.data);
					$('#error-info').addClass('hide').html('')
				}
			};  
		    img.onerror=function(){alert("error!")};  
		    img.src=RootUrl+'api/v1/image/'+data.data; 
	})
	uoLoadFile($('#upload3'),$('#fileToUpload3'),function(arr){
		var data = $.parseJSON(arr)
		var img = new Image();
			img.onload=function(){
				if(img.width < 600 || img.width > 2000){
					alert('请上传宽度在600-2000之间图片');
					return false;
				}else if(img.height > 1600){
					alert('请上传高度小于1600图片');
					return false;
				}else{
					$('#bank-img1').attr('src',RootUrl+'api/v1/image/'+data.data).data('img',data.data);
					$('#error-info').addClass('hide').html('')
				}
			};  
		    img.onerror=function(){alert("error!")};  
		    img.src=RootUrl+'api/v1/image/'+data.data; 
	})

	function uoLoadFile(obj1,obj2,callback){
		if(checkSupport() === "html5"){
			obj1.Huploadify({
				auto:true,
				fileTypeExts:'*.jpg;*.png',
				multi:true,
				formData:{key:123456,key2:'vvvv'},
				fileSizeLimit:1024,
				showUploadedPercent:true,//是否实时显示上传的百分比，如20%
				showUploadedSize:true,
				removeTimeout:1,
				fileObjName:'Filedata',
				buttonText : "",
				uploader:uploaderUrl,
				onUploadComplete:function(file, data, response){
					callback(data)
				}
			});
		}else{
			obj2.uploadify({
		    	'auto'     : true,
		    	'removeTimeout' : 1,
		        'swf'      : 'uploadify.swf',
		        'uploader' : RootUrl+'api/v1/image/upload',
		        'method'   : 'post',
				'buttonText' : '',
		        'multi'    : true,
		        'uploadLimit' : 10,
		        'width' : 450,
		        'height' : 360,
		        'fileTypeDesc' : 'Image Files',
		        'fileTypeExts' : '*.gif; *.jpg; *.png',
		        'fileSizeLimit' : '1024KB',
		        'onUploadSuccess' : function(file, data, response){
		            callback(data)
		        }
		    });
		}
	}
    function authTypeFilter(input){//设计师认证状态
        return {
            "0":"未提交认证",
            "1":"审核中",
            "2":"审核通过",
            "3":"审核不通过",
            "4":"违规下线"
        }[input];
    }
	var check_step = 0;
    var errMsg = {
        "reg_uid": "身份证号格式错误",
        "reg_uidimg1": "请上传身份证正面",
        "reg_uidimg2" : "请上传身份证反面",
        "reg_bankCard" : "请输入正确的银行卡号",
        "reg_bankimg" : "请上传银行正面"
    };
    //获取对象
    var desUid = $("#design-uid");
    var uidImg1 = $("#uid-img1");
    var uidImg2 = $("#uid-img2");
    var desBank = $("#design-bank");
    var desBankCard = $("#design-bank-card");
    var bankImg1 = $('#bank-img1');
    //显示验证信息
   	function showError(obj,id, msg) {
        var msg = msg || errMsg[id];
        var parent = obj.closest('.m-item');
        parent.find('.tips-icon-ok').addClass('hide');
        parent.find('.tips-icon-err').removeClass('hide');
        parent.find('.tips-info').html(msg).removeClass('hide')
        return false;
    }
    function showOk(obj,value) {
    	var parent = obj.closest('.m-item');
        parent.find('.tips-icon-err').addClass('hide');
        if(!value){
	        if ($.trim(obj.val()) != ""){
	        	parent.find('.tips-icon-ok').removeClass('hide');
	        	parent.find('.tips-info').html('').addClass('hide')
	        }
	    }else{
	    	parent.find('.tips-info').html('').addClass('hide')
	    }
        check_step--;
        return true;
    }
    //事件操作
    desUid.on('blur',function(){
        checkUid();
    });
    desBankCard.on('blur',function(){
        checkBankCard();
    });
    //验证函数
    function checkUid(){    //身份证验证
     	var id = "reg_uid";
     	var isIDCard = /^(\d{6})(18|19|20)?(\d{2})([01]\d)([0123]\d)(\d{3})(\d|X)?$/;
        if (!!$.trim(desUid.val()) && isIDCard.test(desUid.val())){
            return showOk(desUid);
        }
        return showError(desUid,id);
    }
    function checkBankCard(){    //身份证验证
     	var id = "reg_bankCard";
     	var isbankCard = /^[1-9]*[1-9][0-9]*$/;
        if (!!$.trim(desBankCard.val()) || desBankCard.val() != 0 && isbankCard.test(desBankCard.val()) && $.trim(desBankCard.val()).length > 15 && $.trim(desBankCard.val()).length < 20){
            return showOk(desBankCard);
        }
        return showError(desBankCard,id);
    }
    $('#design-auth').on('submit',function(){
    	check_step = 2;
    	checkUid();
    	checkBankCard();
    	if(uidImg1.data('img') == null){
			$('#error-info').removeClass('hide').html(errMsg.reg_uidimg1)
			return false;
		}
		if(uidImg2.data('img') == null){
			$('#error-info').removeClass('hide').html(errMsg.reg_uidimg2)
			return false;
		}
		if(bankImg1.data('img') == null){
			$('#error-info').removeClass('hide').html(errMsg.reg_bankimg)
			return false;
		}
    	if(check_step > 0){
			return false;
		}
		$.ajax({
			url:RootUrl+'api/v1/designer/uid_bank_info',
			type: 'PUT',
			contentType : 'application/json; charset=utf-8',
			dataType: 'json',
			data : JSON.stringify({
				"uid":desUid.val(),
				"bank": desBank.find('.value').html(),
				"bank_card": desBankCard.val(),
				"uid_image1":uidImg1.data('img'),
				"uid_image2":uidImg2.data('img'),
				"bank_card_image1":bankImg1.data('img')
			}),
			processData : false,
			success: function(res){
				if(res['msg'] === "success"){
					promptMessage('提交成功，等待管理员审核',"success");
					loadList();
					$('#auth-submit').removeClass('hide').html('等待管理员审核');
				}else{
					$('#error-info').html(res['err_msg']).removeClass('hide');
				}
		   	}
		});
		return false;
    })
	function loadList(){
		$.ajax({
			url:RootUrl+'api/v1/designer/info',
			type: 'GET',
			contentType : 'application/json; charset=utf-8',
			dataType: 'json',
			success: function(res){
				var data = res['data'];
				console.log(data);
				if(data != null){
					if(data.uid_auth_type == '3' || data.uid_auth_type == '4'){
						$('#auth-box').html("审核状态："+authTypeFilter(data.uid_auth_type)+" 失败原因："+data.uid_auth_message)
					}else if(data.uid_auth_type == '2'){
						$('#auth-box').html(data.uid_auth_message)
					}
					desUid.val(data.uid);
					desBankCard.val(data.bank_card);
					var img1 = data.uid_image1 != null && !!data.uid_image1 ?  RootUrl+'api/v1/image/'+data.uid_image1 : '../../static/img/user/uploadify.jpg';
					uidImg1.attr('src',img1).data('img',data.uid_image1 != null ? data.uid_image1 : null);
					var img2 = data.uid_image2 != null && !!data.uid_image2 ?  RootUrl+'api/v1/image/'+data.uid_image2 : '../../static/img/user/uploadify.jpg';
					uidImg2.attr('src',img2).data('img',data.uid_image2 != null ? data.uid_image2 : null);
					var img3 = data.bank_card_image1 != null && !!data.bank_card_image1 ?  RootUrl+'api/v1/image/'+data.bank_card_image1 : '../../static/img/user/uploadify.jpg';
					bankImg1.attr('src',img3).data('img',data.bank_card_image1 != null ? data.bank_card_image1 : null);
				}
		   	}
		});
	}
	loadList();
</script>
<script>
	var _hmt = _hmt || [];
	(function() {
	  var hm = document.createElement("script");
	  hm.src = "//hm.baidu.com/hm.js?66d38d3af612ed7c0979211372aa9682";
	  var s = document.getElementsByTagName("script")[0]; 
	  s.parentNode.insertBefore(hm, s);
	})();
</script>