<div class="message f-cb {{messageClass ? 'message-more' : ''}}" ng-if="notMessages">
	<span class="num f-fl">{{messages.length}}</span>
	<ul class="list f-fl">
		<li bindonce="messages" ng-repeat="data in messages"><a ui-sref="plan({id:data.topicid})"><time bo-text="data.date"></time>设计师<mark bo-text="data.byUser.username">milk</mark>给您方案留了言，点击查看留言</a></li>
	</ul>
	<a class="more f-fr" href="javascript:;" ng-show="{{messages.length > 1}}" ng-click="messageToggle(true)">更多</a>
	<a class="upper f-fr" href="javascript:;" ng-click="messageToggle(false)">更多</a>
</div>
<div class="main">
	<div class="m-index" bindonce="designer" ng-if="designer">
		<div class="info f-cb">
			<div class="onlineSetting" ng-class="{onlineShow : designer.online_status == 0 && designer.auth_type == 2 && designer.authed_product_count > 2,onlineHide : designer.online_status == 1}">
				<h4 class="online" ng-click="onlineSetting(1)"><i class="iconfont2">&#xe62d;</i><span>在线</span></h4>
				<h4 class="busy" ng-click="onlineSetting(0)"><i class="iconfont2">&#xe62e;</i><span>离线</span></h4>
			</div>
			<dl>
				<dt>
					<a ui-sref="infor" class="head"><img bo-src-i="/api/v2/web/thumbnail/120/{{designer.imageid}}" bo-alt="designer.username" bo-if="designer.imageid" /></a>
					<h3><a ui-sref="infor" bo-text="designer.username" bo-if="designer.username"></a></h3>
				</dt>
				<dd class="f-cb">
					<span>
						<strong bo-text="designer.deal_done_count"></strong>
						已接单
					</span>
					<span>
						<strong bo-text="designer.authed_product_count"></strong>
						认证作品
					</span>
					<span>
						<strong bo-text="designer.order_count"></strong>
						预约
					</span>
				</dd>
			</dl>
			<a ui-sref="service" class="editor" ng-if="designer.online_status == 0 && designer.auth_type == 2 && designer.authed_product_count > 2"><i class="iconfont2">&#xe627;</i>&nbsp;&nbsp;接单服务</a>
		</div>
		<div class="flow">
			<ul>
				<li>
					<div class="txt">
						<div class="num"></div>
						<p>提交资料完成<br />设计师认证</p>
					</div>
				</li>
				<li>
					<div class="line"></div>
				</li>
				<li>
					<div class="txt">
						<div class="num num2"></div>
						<p>响应并预约<br />量房时间</p>
					</div>
				</li>
				<li>
					<div class="line"></div>
				</li>
				<li>
					<div class="txt">
						<div class="num num3"></div>
						<p>上门量房并<br />提交方案</p>
					</div>
				</li>
				<li>
					<div class="line"></div>
				</li>
				<li>
					<div class="txt">
						<div class="num num4"></div>
						<p>提交方案<br />合同</p>
					</div>
				</li>
			</ul>
		</div>
		<div class="authen" ng-if="(designer.auth_type == 0 || designer.auth_type == 1 || designer.auth_type == 3 || designer.auth_type == 4) && designer.authed_product_count < 3">
			<div class="inofTips"><i class="iconfont2">&#xe612;</i>完成基本资料认证及作品认证（至少3套）的设计师才可以接单</div>
			<p>
				<span ng-if="designer.auth_type == 0">欢迎来到简繁家，请完善您的基本资料</span>
				<span ng-if="designer.auth_type == 2 && designer.authed_product_count == 0">您有<strong bo-text="designer.authed_product_count"></strong>套作品通过认证，请继续发布作品</span>
				<span ng-if="designer.auth_type == 1">您的基本资料已提交，请耐心等待审核</span>
				<span ng-if="designer.auth_type == 3">您的基本资料审核不通过（<span ng-bind="designer.auth_message"></span>）</span>
				<span ng-if="designer.auth_type == 4">您被基本资料审核强制下线（<span ng-bind="designer.auth_message"></span>）</span>
			</p>
			<div class="btns">
				<a class="u-btns" ng-if="designer.auth_type == 0" ui-sref="infor">提交资料</a>
				<a class="u-btns u-btns-revise" ng-if="designer.auth_type == 1" ui-sref="infor">&nbsp;&nbsp;&nbsp;查看&nbsp;&nbsp;&nbsp;</a>
				<a class="u-btns u-btns-revise" ng-if="designer.auth_type == 3" ui-sref="infor">重新提交</a>
				<a class="u-btns u-btns-revise" ng-if="designer.auth_type == 4" ui-sref="infor">重新提交</a>
				<a class="u-btns" ng-if="designer.auth_type == 2 && designer.authed_product_count == 0" ui-sref="addProduct">发布作品</a>
			</div>
		</div>
		<ul class="list">
			<li ng-if="requirementList.length == 0 && (designer.auth_type == 2 && designer.authed_product_count > 2)">
				<div class="ct">您还没有装修需求哟，修改接单资料和上传作品，更容易获得业主预约</div>
				<div class="btns">
					<a ui-sref="service" class="u-btns">前往修改</a>
					<a ui-sref="addProduct" class="u-btns">上传作品</a>
				</div>
			</li>
			<li bindonce="requirementList" ng-repeat="data in requirementList | limitTo : 3">
				<div class="tt f-cb">
					<h4 class="f-fl">
						<strong>物业地址</strong>
						<span bo-if="data.province"><i bo-text="data.province"></i></span>
						<span bo-if="data.city"><i bo-text="data.city"></i></span>
						<span bo-if="data.district"><i bo-text="data.district"></i></span>
						<span bo-if="data.street"><i bo-text="data.street"></i></span>
						<span bo-if="data.cell"><i bo-text="data.cell"></i>小区</span>
						<span bo-if="data.cell_phase"><i bo-text="data.cell_phase"></i>期</span>
						<span bo-if="data.cell_building"><i bo-text="data.cell_building"></i>栋</span>
						<span bo-if="data.cell_unit"><i bo-text="data.cell_unit"></i>单元</span>
						<span bo-if="data.cell_detail_number"><i bo-text="data.cell_detail_number"></i>室</span>
					</h4>
					<div class="progress f-fr">
						<div class="bar">
							<div class="in in{{data.plan.status}}"></div>
						</div>
						<p ng-switch="data.plan.status">
							<i ng-switch-when="0">
								<i bo-if="!!data.plan.get_phone_time">等待设置量房时间</i>
								<i bo-if="!data.plan.get_phone_time">等待响应预约</i>
							</i>
							<i ng-switch-when="1">已拒绝业主</i>
							<i ng-switch-when="2">等待业主确认量房</i>
							<i ng-switch-when="3">等待业主选择方案</i>
							<i ng-switch-when="4">方案未选中</i>
							<i ng-switch-when="5">方案被选中</i>
							<i ng-switch-when="6">提交方案中</i>
							<i ng-switch-when="7">未响应业主</i>
							<i ng-switch-when="8">未上传方案</i>
						</p>
					</div>
				</div>
				<div class="ct" ng-switch="data.plan.status">
					<p ng-switch-when="0">
						请24小时内与业主沟通量房时间，并响应业主预约，过期视为放弃。
					</p>
					<p ng-switch-when="1">
						业主向您发起一个量房预约，请等待您响应。<br />
						请在24小时内响应业主需求，过期视为放弃。
					</p>
					<p ng-switch-when="2">
						您已经响应业主，请准时上面量房<br />
						业主确认量房后，您才可以提交装修方案。
					</p>
					<p ng-switch-when="3">
						您已上传装修方案，等待业主选择装修方案
					</p>
					<p ng-switch-when="4">
						您的方案未被业主选定，请在历史历史装修需求查看
					</p>
					<p ng-switch-when="5">
						您的方案已被业主选定，前往生成并签订三方合同
					</p>
					<p ng-switch-when="6">
						业主已经确认您量房，请在5天内上传方案，过期视为放弃。
					</p>
					<p ng-switch-when="7">
						您没有在规定时间内响应，请在历史历史装修需求查看
					</p>
					<p ng-switch-when="8">
						您没有在规定时间内上传方案，请在历史历史装修需求查看
					</p>
				</div>
				<div class="btns" ng-switch="data.plan.status">
					<a class="u-btns" ng-switch-when="0" bo-href-i="designer.html#/requirement/{{data._id}}/owner">
						<i bo-if="!!data.plan.get_phone_time">前往设置量房时间</i>
						<i bo-if="!data.plan.get_phone_time">前往响应预约</i>
					</a>
					<a class="u-btns" ng-switch-when="1" bo-href-i="designer.html#/requirement/{{data._id}}/owner">前往响应预约</a>
					<a class="u-btns" ng-switch-when="2" bo-href-i="designer.html#/requirement/{{data._id}}/owner">等待业主确认量房</a>
					<a class="u-btns" ng-switch-when="3" bo-href-i="designer.html#/requirement/{{data._id}}/plan">装修方案</a>
					<a class="u-btns" ng-switch-when="4" bo-href-i="designer.html#/requirement/{{data._id}}/contract">前往生成</a>
					<a class="u-btns" ng-switch-when="5" bo-href-i="designer.html#/requirement/{{data._id}}/contract">前往生成三方合同</a>
					<a class="u-btns" ng-switch-when="6" bo-href-i="designer.html#/requirement/{{data._id}}/owner">给业主提交方案</a>
					<a class="u-btns" ng-switch-when="7" href="/tpl/download/index.html">下载简繁家APP</a>
					<a class="u-btns" ng-switch-when="8" bo-href-i="designer.html#/requirement/{{data._id}}/contract">方案过期</a>
				</div>
			</li>
		</ul>
	</div>
	<div class="pageLoading" ng-hide="!!designer"></div>
</div>
