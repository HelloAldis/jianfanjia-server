<div class="message f-cb {{messageClass ? 'message-more' : ''}}" ng-if="commentShow">
	<span class="num f-fl">{{messages.length}}</span>
	<ul class="list f-fl">
		<li bindonce="messages" ng-repeat="data in messages"><a ui-sref="plan({id:data.topicid})"><time bo-text="data.date"></time>设计师<mark bo-text="data.byUser.username">milk</mark>给您方案留了言，点击查看留言</a></li>
	</ul>
	<a class="more f-fr" href="javascript:;" ng-if="messages.length > 1" ng-click="messageToggle(true)">更多</a>
	<a class="upper f-fr" href="javascript:;" ng-click="messageToggle(false)">更多</a>
</div>
<div class="main">
	<div class="m-index">
		<div class="info f-cb" bindonce="user">
			<dl>
				<dt>
					<a ui-sref="infor" class="head"><img bo-src-i="/api/v2/web/thumbnail/120/{{user.imageid}}" bo-alt="user.username" bo-if="user.imageid" /></a>
					<h3><a ui-sref="infor" bo-text="user.username" bo-if="user.username"></a></h3>
				</dt>
				<dd bo-if="user.province && user.province != '请选择省份'">
					<i class="iconfont2">&#xe61f;</i><span><i bo-text="user.province"></i><i bo-text="user.city" bo-if="user.city && user.city != '请选择市'"></i><i bo-text="user.district" bo-if="user.district && user.district != '请选择县/区'"></i><i bo-text="user.address" bo-if="user.address"></i></span>
				</dd>
			</dl>
			<a ui-sref="infor" class="editor"><i class="iconfont2">&#xe627;</i>&nbsp;&nbsp;编辑资料</a>
		</div>
		<div class="flow">
			<ul>
				<li>
					<div class="txt">
						<div class="num"></div>
						<p>发布装修<br />需求</p>
					</div>
				</li>
				<li>
					<div class="line"></div>
				</li>
				<li>
					<div class="txt">
						<div class="num num2"></div>
						<p>预约设计师<br />上门量房</p>
					</div>
				</li>
				<li>
					<div class="line"></div>
				</li>
				<li>
					<div class="txt">
						<div class="num num3"></div>
						<p>确认设计师<br />上门量房</p>
					</div>
				</li>
				<li>
					<div class="line"></div>
				</li>
				<li>
					<div class="txt">
						<div class="num num4"></div>
						<p>选择装修<br />方案</p>
					</div>
				</li>
				<li>
					<div class="line"></div>
				</li>
				<li>
					<div class="txt">
						<div class="num num5"></div>
						<p>生成三方<br />合同</p>
					</div>
				</li>
			</ul>
		</div>
		<ul class="list">
			<li ng-if="requirementList.length == 0">
				<div class="ct">你还没有发布装修需求哟~</div>
				<div class="btns">
					<a ui-sref="addRequirement" class="u-btns">发布家装需求</a>
					<a ui-sref="addRequirementb" class="u-btns">发布商装需求</a>
				</div>
			</li>
			<li bindonce="requirementList" ng-repeat="data in requirementList | limitTo : 3">
				<div class="tt f-cb">
					<h4 class="f-fl">
						<strong>物业地址</strong>
						<span bo-if="data.province"><i bo-text="data.province"></i></span>
						<span bo-if="data.city"><i bo-text="data.city"></i></span>
						<span bo-if="data.district"><i bo-text="data.district"></i></span>
						<span bo-if="data.street && data.dec_type == '商装'"><i bo-text="data.street"></i></span>
						<span bo-if="data.cell"><i bo-text="data.cell"></i><i bo-if="requirement.dec_type == '家装'">小区</i></span>
						<span bo-if="data.cell_phase && requirement.dec_type == '家装'"><i bo-text="data.cell_phase"></i>期</span>
						<span bo-if="data.cell_building && requirement.dec_type == '家装'"><i bo-text="data.cell_building"></i>栋</span>
						<span bo-if="data.cell_unit && requirement.dec_type == '家装'"><i bo-text="data.cell_unit"></i>单元</span>
						<span bo-if="data.cell_detail_number && requirement.dec_type == '家装'"><i bo-text="data.cell_detail_number"></i>室</span>
					</h4>
					<div class="progress f-fr">
						<div class="bar">
							<div class="in in{{data.status}}"></div>
						</div>
						<p ng-switch="data.status">
							<i ng-switch-when="0">需要预约设计师</i>
							<i ng-switch-when="1">设计师正在响应中</i>
							<i ng-switch-when="2">确认设计师上门量房</i>
							<i ng-switch-when="3">选择设计师方案</i>
							<i ng-switch-when="4">生成并签订三方合同</i>
							<i ng-switch-when="5">APP配置工地</i>
							<i ng-switch-when="6">设计师提交方案中</i>
							<i ng-switch-when="7">APP管控装修工地</i>
						</p>
					</div>
				</div>
				<div class="ct" ng-switch="data.status">
					<p ng-switch-when="0">
						系统已为您匹配<span bo-if="data.rec_designerids.length != 0"><i bo-text="data.rec_designerids.length"></i>名</span>设计师，请预约设计师上门量房
					</p>
					<p ng-switch-when="1">
						您已经预约了<i bo-text="data.order_designerids.length"></i>名设计师，请等待设计师响应。<br />
						设计师将在24小时内响应您的需求。如果超过时间未响应，您可以重新预约设计师。
					</p>
					<p ng-switch-when="2">
						请确认设计师已上门量房并给予服务评价。<br />
						确认量房后，设计师才可以提交装修方案。
					</p>
					<p ng-switch-when="3">
						设计师已上传装修方案，请查看并选择装修方案
					</p>
					<p ng-switch-when="4">
						您已选择设计师的装修方案，生成并签订三方合同
					</p>
					<p ng-switch-when="5">
						您的工地已经配置，前往APP实时掌控最新进度
					</p>
					<p ng-switch-when="6">
						您已经确认设计师量房，请等待设计师上传方案。<br />
						设计师将在5天内响应给您方案，供您选择，请留意短信通知。
					</p>
					<p ng-switch-when="7">
						您已选定设计师装修方案，请下载 <br />简繁家APP，掌上管控装修工地。
					</p>
				</div>
				<div class="btns" ng-switch="data.status">
					<a class="u-btns" ng-switch-when="0" bo-href-i="owner.html#/requirement/{{data._id}}/booking">前往预约量房</a>
					<a class="u-btns" ng-switch-when="1" bo-href-i="owner.html#/requirement/{{data._id}}/score">查看设计师响应</a>
					<a class="u-btns" ng-switch-when="2" bo-href-i="owner.html#/requirement/{{data._id}}/score">前往确认设计师上门量房</a>
					<a class="u-btns" ng-switch-when="3" bo-href-i="owner.html#/requirement/{{data._id}}/plan">查看并选择装修方案</a>
					<a class="u-btns" ng-switch-when="4" bo-href-i="owner.html#/requirement/{{data._id}}/contract">前往生成三方合同</a>
					<a class="u-btns" ng-switch-when="5" bo-href-i="owner.html#/requirement/{{data._id}}/contract">APP配置工地</a>
					<a class="u-btns" ng-switch-when="6" bo-href-i="owner.html#/requirement/{{data._id}}/plan">查看并选择装修方案</a>
					<a class="u-btns" ng-switch-when="7" href="/tpl/download/index.html">下载简繁家APP</a>
				</div>
			</li>
		</ul>
		<div class="pageLoading" ng-hide="!!requirementList"></div>
	</div>
</div>
