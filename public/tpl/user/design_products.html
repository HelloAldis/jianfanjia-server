<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8" />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<title>互联网设计师专单平台|装修效果图|装修流程|施工监理_简繁家</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="description" content="简繁家提供家装设计、新房装修、装修流程、室内设计、家装设计、室内装修、施工监理等服务和装修知识、装修风格、装修效果图、装修设计图等信息。">
	<meta name="keywords" content="室内装修,装修流程,装修知识,装修效果图,家装施工监理">
	<link rel="stylesheet" type="text/css" href="../../static/css/public.css" />
	<link rel="stylesheet" type="text/css" href="../../static/css/user.css" />
	<script type="text/javascript" src="../../static/js/lib/jquery-1.11.1.min.js"></script>
	<script type="text/javascript" src="../../static/js/lib/tdist.js"></script>
	<script type="text/javascript" src="../../static/js/lib/public.js"></script>
	<!--[if lt IE 9]>
      <script type="text/javascript" src="../../static/js/lib/json2-min.js"></script>
    <![endif]-->
     <!--[if lt IE 8]>
      <script type="text/javascript">
      	if(!-[1,]){window.location.href = "../other/error.html";} 
      </script>
    <![endif]-->
</head>
<body>
	<div class="g-hd">
		<div class="g-wp f-cb">
			<div class="m-logo f-fl">
				<h1><a href="../index/index.html">简繁家</a></h1>
			</div>
			<div class="f-fr">
				<div class="user" id="j-userLogin">
					<a href="../user/login.html">登录</a>/<a href="../user/reg.html">注册</a>
				</div>
				<ul class="m-nav f-fl">
					<li class="active"><a href="../index/index.html">首页</a></li>
					<li><a href="../design/index.html">设计师</a></li>
					<li><a href="../live/index.html">装修直播</a></li>
					<li><a href="../merit/index.html">为什么选简繁家</a></li>
				</ul>
			</div>
		</div>
	</div>
	<div class="g-wp g-user f-cb">
		<div class="user-sd f-fl">
			<h2>我是设计师</h2>
			<ul>
				<li class="current"><a href="design_products.html">我的作品</a></li>
				<li><a href="design_owner.html">我的业主</a></li>
				<li><a href="design_scheme.html">业主方案</a></li>
				<li><a href="design_need.html">我的收藏</a></li>
				<li><a href="design_info.html">我的资料</a></li>
				<li><a href="design_team.html">我的施工团队</a></li>
			</ul>
		</div>
		<div class="user-mn f-fr" id="j-design">
			<div class="m-tt">
				<ul class="tabNav">
					<li class="active">我的作品</li>
					<li><a href="design.html">发布作品</a></li>
				</ul>
			</div>
			<div class="m-ct design">
				<div class="tabBox">
					<div class="listBox">
						<div class="m-table">
							<table>
								<thead>
									<tr>
										<th class="td1">标题</th>
										<th class="td2">住宅空间</th>
										<th class="td3">风格</th>
										<th class="td4">包工类型</th>
										<th class="td5">预览</th>
										<th class="td6">操作</th>	
									</tr>
								</thead>
								<tbody></tbody>
							</table>
						</div>
						<div class="create">
							<a href="design.html" class="btn create-btn">添加作品</a>
						</div>
					</div>
				</div>
			</div>
		</div>	
	</div>
	<div class="g-ft">
		<div class="m-sitemap f-cb">
			<div class="g-wp">
				<div class="sitemap f-fl">
					<dl>
						<dt>业主指南</dt>
						<dd><a href="../guide/index.html?0">业务流程</a></dd>
						<dd><a href="../guide/index.html?1">三方保障合同</a></dd>
					</dl>
					<dl>
						<dt>设计师指南</dt>
						<dd><a href="../guide/design.html?0">设计师认证</a></dd>
						<dd><a href="../guide/design.html?1">作品上传</a></dd>
						<dd><a href="../guide/design.html?2">上门沟通及量房</a></dd>
						<dd><a href="../guide/design.html?3">设计师入驻协议</a></dd>
					</dl>
					<dl>
						<dt>关于我们</dt>
						<dd><a href="../about/index.html#about">关于我们</a></dd>
						<dd><a href="../about/index.html#contact">联系我们</a></dd>
					</dl>
				</div>
				<div class="erweima f-fr">
					<img src="../../img/public/erweima.jpg" alt="" />
				</div>
			</div>
		</div>
		<div class="m-copy">
			<div class="g-wp">
			Copyright © 2015-2025 jianfanjia.com All Rights Reserved 武汉家易装科技有限公司 隐私权政策 鄂ICP备15014103号
			</div>
		</div>
	</div>
</body>
</html>
<script type="text/javascript">
	var $design = $('#j-design'),
		$list = $design.find('.m-table').find('tbody');
	//渲染生成列表
	function loadList(){
		var url = RootUrl+'api/v1/designer/product';
		$.ajax({
			url:url,
			type: 'GET',
			contentType : 'application/json; charset=utf-8',
			dataType: 'json',
			success: function(res){
				if(res['data'].length == 0 || res['data'].length < 1){
					$list.html('暂无作品')
				}else{
					createList(res['data'])
				}
		   	}
		});
	};
	//创建列表
	function createList(data){
		$list.html('');
		var sLi = '';
		for (var i = 0,len = data.length; i < len; i++) {
			sLi += '<tr data-uid="'+data[i]._id+'">'
						+'<td class="td1">'+data[i].cell+'</td>'
						+'<td class="td2">'+globalData.house_type[data[i].house_type]+'</td>'
						+'<td class="td3">'+globalData.dec_style[data[i].dec_style]+'</td>'
						+'<td class="td4">'+globalData.work_type[data[i].work_type]+'</td>'
						+'<td class="td5">'
							+'<a href="../design/detail.html?'+data[i]._id+'"><i class="iconfont">&#xe60f;</i></a>'
						+'</td>'
						+'<td class="td6">'
							+'<a href="design.html?'+data[i]._id+'" class="editor"><i class="iconfont">&#xe607;</i>编辑</a>'
							+'<a href="javascript:;" class="delete"><i class="iconfont">&#xe611;</i>删除</a>'
						+'</td>'
					+'</tr>'
		};
		$list.html(sLi)
	};
	//删除
	$design.delegate('.delete','click',function(ev){
		ev.preventDefault();
		if($list.find('tr').size() < 2){
			alert('至少保留一个作品')
			return false;
		}
		if(confirm("你确定要删除吗？删除不能恢复")){
			var oDl = $(this).closest('tr');
			var uidName = oDl.data('uid');
			var url = RootUrl+'api/v1/designer/product';
			$.ajax({
				url:url,
				type: 'DELETE',
				contentType : 'application/json; charset=utf-8',
				dataType: 'json',
				data : JSON.stringify({
					"_id" : uidName
				}),
				processData : false,
				success: function(res){
					if(res["msg"] == "success"){
						promptMessage('删除成功',"success")
						loadList();
					}else{
						promptMessage('删除失败',"error")
					}
			   	}
			});
		}
	})
	loadList()
</script>