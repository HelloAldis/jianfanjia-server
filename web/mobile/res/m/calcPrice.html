<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=3.0, minimum-scale=1.0, user-scalable=1">
    <title></title>
    <link rel="stylesheet" href="bower_components/animate.css/animate.min.css">
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/calcPrice.css">
  </head>
  <body>
    <div class="content">
      <div class="homePage">
        <p>
          calc-price-area
        </p>
        <button type="button" class="btnSubmit">获取装修预算</button>
      </div>
      <div class="calcPriceHouse">
        <p>
          calc-price-house
        </p>
        <button type="button" class="btnSubmit">下一步</button>
      </div>
      <div class="calcPriceStyle">
        <p>
          calc-price-style
        </p>
        <button type="button" class="btnSubmit">生成装修预算</button>
      </div>
    </div>
    <footer></footer>
    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript">
      var _history = [];

      var homePage = $('.homePage');
      var calcPriceHouse = $('.calcPriceHouse');
      var calcPriceStyle = $('.calcPriceStyle');

      var homePageTag = 'homePageTag';
      var calcPriceHouseTag = 'calcPriceHouseTag';
      var calcPriceStyleTag = 'calcPriceStyleTag';

      $('.homePage .btnSubmit').click(function () {
        calcPriceHouse.show();
        pushToHouse();
        pushState(homePageTag, calcPriceHouseTag);
      });
      $('.calcPriceHouse .btnSubmit').click(function () {
        calcPriceStyle.show();
        pushToStyle();
        pushState(calcPriceHouseTag, calcPriceStyleTag);
      });
      $('.calcPriceStyle .btnSubmit').click(function () {

      });

      function popToHome() {
        animateView(homePage, 'slideInLeft');
        animateView(calcPriceHouse, 'slideOutRight');
      }

      function pushToHouse() {
        animateView(homePage, 'slideOutLeft');
        animateView(calcPriceHouse, 'slideInRight');
      }

      function popToHouse() {
        animateView(calcPriceHouse, 'slideInLeft');
        animateView(calcPriceStyle, 'slideOutRight');
      }

      function pushToStyle() {
        animateView(calcPriceHouse, 'slideOutLeft');
        animateView(calcPriceStyle, 'slideInRight');
      }

      function animateView(element, clz) {
        var animateValue = clz + ' animated';
        element.removeClass('slideOutLeft slideOutRight slideInLeft slideInRight animated');
        element.addClass(animateValue);
      }

      function pushState(preS, curS) {
        var state = {pre:preS};
        window.history.pushState(null, curS, null);
        _history.push(state);
      }

      window.addEventListener('popstate', function (e) {
        var state = _history.pop();
        if (!state) return;
        var preState = state.pre;
        if (preState === homePageTag) {
          popToHome();
        } else if (preState === calcPriceHouseTag) {
          popToHouse();
        }
      });
    </script>
  </body>
</html>
