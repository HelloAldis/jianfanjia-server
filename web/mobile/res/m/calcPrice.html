<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0">
    <title></title>
    <link rel="stylesheet" href="bower_components/animate.css/animate.min.css">
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/calcPrice.css">
    <script src="bower_components/lib-flexible/build/flexible_css.js"></script>
    <script src="bower_components/lib-flexible/build/flexible.js"></script>
  </head>
  <body>
    <div class="content">
      <div class="homePage">
        <div class="headerImg">
          <p class="title">
            为您开启奇妙的装修之旅
          </p>
        </div>

        <p class="secondTitle">
          只需三步，即刻在线生成智能预算
        </p>
        <div class="fldContainer">
          <img src="img/calcPrice/icon_area.png" />
          <input type="text" name="name" value="" placeholder="建筑面积">
          <span>㎡</span>
        </div>
        <div class="btnContainer">
          <button type="button" class="btnSubmit">获取装修预算</button>
        </div>
      </div>
      <div class="calcPriceHouse">
        <div class="houseType">
          <p class="title">
            请选择您中意的户型
          </p>
          <div class="iconPlusContainer">
            <img src="img/calcPrice/icon_plus.png" class="iconPlus" alt="" />
            <img src="img/calcPrice/icon_plus.png" class="iconPlus" alt="" />
            <img src="img/calcPrice/icon_plus.png" class="iconPlus" alt="" />
            <img src="img/calcPrice/icon_plus.png" class="iconPlus" alt="" />
          </div>
          <div class="houseValueContainer">
            <img src="img/calcPrice/icon_house.png" class="iconHouse" alt="" />
            <span class="houseValueNumber">2</span>
            <span class="houseValueName">室</span>
            <span class="houseValueNumber">1</span>
            <span class="houseValueName">厅</span>
            <span class="houseValueNumber">1</span>
            <span class="houseValueName">厨</span>
            <span class="houseValueNumber">1</span>
            <span class="houseValueName">卫</span>
          </div>
          <div class="iconPlusContainer">
            <img src="img/calcPrice/icon_minus.png" class="iconPlus" alt="" />
            <img src="img/calcPrice/icon_minus.png" class="iconPlus" alt="" />
            <img src="img/calcPrice/icon_minus.png" class="iconPlus" alt="" />
            <img src="img/calcPrice/icon_minus.png" class="iconPlus" alt="" />
          </div>
        </div>

          <div class="row btnContainer">
            <button type="button" class="btnSubmit">下一步</button>
          </div>
      </div>
      <div class="container calcPriceStyle">
        <div class="row collectionContainer">
          <div class="col-xs-12">
            <div class="row">
              <h4 class="title">
                除主卧外，另外2个卧室用作（多选／必选）
              </h4>
            </div>
            <div class="row collectionView">
              <div class="row">
                <div class="row">
                  <div class="col-xs-3 col">
                    次卧
                  </div>
                  <div class="col-xs-3 col">
                    次卧
                  </div>
                  <div class="col-xs-3 col">
                    儿童房
                  </div>
                  <div class="col-xs-3 col">
                    儿童房
                  </div>
                </div>
                <div class="row">
                  <div class="col-xs-3 col">
                    书房
                  </div>
                  <div class="col-xs-3 col">
                    衣帽间
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row btnContainer">
          <button type="button" class="btnSubmit">生成装修预算</button>
        </div>
      </div>
    </div>
    <footer class="footer">
      <img src="img/calcPrice/logo.png" alt="logo" />
      <a href="javascript:;">立即下载简繁家App</a>
    </footer>
    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript">
      var homePage = $('.homePage');
      var calcPriceHouse = $('.calcPriceHouse');
      var calcPriceStyle = $('.calcPriceStyle');

      var homePageTag = 'homePageTag';
      var calcPriceHouseTag = 'calcPriceHouseTag';
      var calcPriceStyleTag = 'calcPriceStyleTag';

      $('.homePage .btnSubmit').click(function () {
        calcPriceHouse.show();
        pushToHouse();
        pushState(homePageTag, calcPriceHouseTag);
      });
      $('.calcPriceHouse .btnSubmit').click(function () {
        calcPriceStyle.show();
        pushToStyle();
        pushState(calcPriceHouseTag, calcPriceStyleTag);
      });
      $('.calcPriceStyle .btnSubmit').click(function () {

      });

      function popToHome() {
        animateView(homePage, 'slideInLeft');
        animateView(calcPriceHouse, 'slideOutRight');
      }

      function pushToHouse() {
        animateView(homePage, 'slideOutLeft');
        animateView(calcPriceHouse, 'slideInRight');
      }

      function popToHouse() {
        animateView(calcPriceHouse, 'slideInLeft');
        animateView(calcPriceStyle, 'slideOutRight');
      }

      function pushToStyle() {
        animateView(calcPriceHouse, 'slideOutLeft');
        animateView(calcPriceStyle, 'slideInRight');
      }

      function animateView(element, clz) {
        var animateValue = clz + ' animated';
        element.removeClass('slideOutLeft slideOutRight slideInLeft slideInRight animated');
        element.addClass(animateValue);
      }

      function pushState(preS, curS) {
        var state = {pre:preS};
        window.history.replaceState(state, null, null);
        window.history.pushState(null, curS, null);
      }

      window.addEventListener('popstate', function (e) {
        var state = e.state;
        if (!state) return;
        var preState = state.pre;
        if (preState === homePageTag) {
          popToHome();
        } else if (preState === calcPriceHouseTag) {
          popToHouse();
        }
      });
    </script>
  </body>
</html>
